# Balancer V3
It is an Ethereum-based AMM focusing on fungible and yield-bearing liquidity.
They describe their main focus on simplicity, flexibility and extensibility.

Some significant features of Balancer:
- Hooks: These are the speciailised contracts to extend the functionality of already existing pools. These are used for following majorly:
    - LVR (Loss versus Rebalancing) reduction
    - Dynamic Fees
    - Automatic Gauge locking
    - Sell or Buy limits

    Each Hook contract must implement the ``getHookFlags()`` function which returns a struct ``HookFlags`` indicating which hooks are to be supported. ``HookFlags`` are set at the time of pool registration and stored in Vault, thus cannot be changed later.





- Balancer Pool Token: representing the shares in a Balancer pool. When a user adds liquidity to a balancer pool by depositing tokens, in return they receive Balancer Pool Token. The value of these tokens changes as the composition of pool changes, are hence "dynamic". The amount of token issued to a user is based on their share in the pool, providing a portion of trading fees generated by the pool to the user, proportional to their share.

- Pool Creator Fee: The one who developed a thriving pool will get some share of swap fee and yield fee.

- Pool Role Permissions: Only certain accounts have the permission to change the certain pool settings

```javascript
struct PoolRoleAccounts {
    address pauseManager;//can pause or unpause a pool
    address swapFeeManager;//can set swap fees
    address poolCreator;//can set pool creator fee
}
```
If address is set zero, Balancer Governance gets the permission by default.
Balancer governance can always pause/unpause a pool, but if there is a swapFeeManager or poolCreator , then Balancer Governance cannot seswap fees or pool creator fee

- Exchange Rate Providers: These are contracts present which has ``getRate()`` function, which provides the exchange rate between two assets. These can be from any source: on-chain source, oracles(Chainlink) or any other calculations. 
```javascript
//struct PoolData present in Vault contract
struct PoolData {
    PoolConfigBits poolConfigBits;
    IERC20[] tokens;
    TokenInfo[] tokenInfo;
    uint256[] balancesRaw;
    uint256[] balancesLiveScaled18;
    uint256[] tokenRates;
    uint256[] decimalScalingFactors;
}
```
Whenever an operation like add or remove liquidity is performed, ``tokenRates`` from ``PoolData`` is internally updated through ``reloadBalancesAndRates`` function

- Balancer Pools : https://docs.balancer.fi/concepts/explore-available-balancer-pools/